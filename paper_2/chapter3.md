## 3. 改寫系統 (Rewrite Systems)

一個模型能夠透過**改寫系統 (Rewrite Systems)** 來被轉換成另一模型。改寫系統由具有**左側**與**右側**的**規則 (rules)** 所組成。這些規則指定一符號集（左側）能夠被另一符號集（右側）所取代。此類操作類似於**形式語法 (Formal Grammars)** 中採用的規則。形式語法（或稱**生成語法 (Generative Grammars)**）起源於語言學，被作為述在自然語言中，由出現的詞組、片語集合的一種模型 [6]。形式語法通常對字串進行操作，但並不全然。**圖狀語法 (Graph Grammars)** 是形式語法的一種特殊格式，由多個節點與邊所組成。**圖 (graph)** 比字串更利於表達任務結構，且也能夠用來表示空間。在圖狀語法中，一個或多個節點與其相連邊會被取代成另一組由節點與邊所構成的新結構 [12]。圖三與圖四描述了取代的過程。經過特定的規則所描述，選擇一組即將被替換的節點之後，根據規則左側對所選擇的節點進行編號（圖四的第 2 步驟）。下一步，將所有被選擇節點之間的邊全部移除（第 3 步驟）。有編號的節點接著會被取代成**規則右側**的等價節點（相同編號之節點）（第 4 步驟）。然後將所有**規則右側**沒有**規則左側**等價的節點添加至圖中（第 5 步驟）。最後，連接新節點的邊依**規則右側**放入圖中（第 6 步驟），以及移除編號（第 7 步驟）。請注意，圖狀語法允許刪除現有的節點，但此操作在本文中不會被採用。

![](./img/3.png)
![](./img/4.png)

形式語法與改寫系統的差異在於後者能夠以一組符號作為起始點，且終端與非終端符號之間並沒有明顯的區隔。這意味著改寫系統**終止 (terminate)** 的方式與形式語法不同，任一**轉換(transformation)**將會產生有意義的模型 [10]。

改寫系統只能對符合形式語法的模型進行操作。在此特殊情形下，圖狀改寫系統可以從代表著任務的圖開始，並將其轉換為空間。改寫系統的規則必須以這樣的方式建構，使得輸出的模型不會與目標模型的語法互斥。在圖五中描繪了任務與空間模型、相互關聯的語法以及改寫系統。

改寫系統與形式語法是不同的，因為前者並不定義語言或是模型。然而，它們可以編改設計原則：改寫系統允許設計者對模型進行操作，讓模型轉換為另一個模型。當實行自動轉換時，改寫系統相當嚴格，僅允許操作設定好的規則，其餘概不接受。現實上的設計師更加靈巧，但他們也是遵守著某些限制。如果目標是創建出一可以通關的關卡，沒有一個設計師會在鎖的後方放上可以開啟這道鎖的鑰匙，因為這樣會導致**死結 (deadlock)** 的問題衍生。

使用改寫系統的優點便是防止會產生**死結**的操作，這需要根據某些限制來建構改寫系統，並且套用的轉換必須符合改寫系統的規則的。對於人類設計師來說，這也許不是最佳、最容易的作法，但可以很容易地達到自動化。可以開發一套設計關卡的軟體工具，基於改寫系統來生成任務、空間模型，來完成所有可能操作的工具。這類工具的附加優點是能讓設計師快速、有效的產生不同且正確關卡。此外，可以想像對於特定類型的遊戲時，全部的關卡可以透過此方式來自動化設計。

圖五建議將改寫規則套用在**任務圖 (a graph representing a mission)** 來產生**空間圖 (a graph representing a space)**，不過這並非必備條件。正如先前提及的，任務轉換到空間的過程涉及了許多小型的轉換步驟，而每一個轉換步驟由不同的改寫系統所控制。第一道改寫系統建立了數個任務，第二道改寫系統可以添加一些**依賴關係 (dependencies)** 或者是確保任務處於一有趣的順序。下一道改寫系統可以添加**鎖與鑰匙**來建立出非線性、更像空間的任務結構，而另一道改寫系統可以添加額外任務與獎勵。從任務逐漸轉換成空間形成了一種強烈的對比，任務與空間只不過是對遊戲關卡有用的觀點之一，轉換的過程中存在許多中間觀點。然而，這些觀點有著各自的特徵，有經驗的設計師利用這些特徵去蕪存菁後，能創造出令人嘆為觀止的遊戲體驗。

![](./img/5.png)
